import{c as N,j as e,G as l,S as b}from"./index-C1j8Y-HA.js";import{r as c}from"./react-vendor-ClEiMBPH.js";import{C as v,G as y,a as w}from"./map-vendor-C_0Z-a2u.js";import"./chart-vendor-DtCDP6BD.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=N("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),C="https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json";function S({className:n=""}){const[i,p]=c.useState([]),[d,x]=c.useState(!0),[m,h]=c.useState(null);c.useEffect(()=>{(async()=>{var s;try{x(!0),h(null),console.log("🌍 Fetching geographic data...");const r=await fetch("/.netlify/functions/geo-trends");if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const a=await r.json();if(a.error)throw new Error(a.error);console.log("✅ Geographic data loaded:",((s=a.data)==null?void 0:s.length)||0,"countries"),p(a.data||[])}catch(r){console.error("❌ Failed to fetch geographic data:",r),h(r instanceof Error?r.message:"Failed to load geographic data")}finally{x(!1)}})()},[]);const o=new Map;i.forEach(t=>{o.set(t.country,t)});const u=t=>{const s=o.get(t);if(!s||s.visitors===0)return"#374151";const r=Math.max(...i.map(g=>g.visitors)),a=s.visitors/r;return a<.1?"#134e4a":a<.3?"#0f766e":a<.5?"#0d9488":a<.7?"#14b8a6":a<.9?"#2dd4bf":"#5eead4"},f=i.reduce((t,s)=>t+s.visitors,0),j=i.slice(0,5);return d?e.jsxs("div",{className:`bg-slate-800 rounded-xl border border-slate-700 p-6 ${n}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-teal-900/50 rounded-lg",children:e.jsx(l,{className:"w-5 h-5 text-teal-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Geographic Distribution"})]}),e.jsx("div",{className:"flex items-center justify-center h-[400px]",children:e.jsx(b,{size:"lg"})})]}):m?e.jsxs("div",{className:`bg-slate-800 rounded-xl border border-slate-700 p-6 ${n}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-teal-900/50 rounded-lg",children:e.jsx(l,{className:"w-5 h-5 text-teal-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Geographic Distribution"})]}),e.jsx("div",{className:"flex items-center justify-center h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-400 mb-2",children:"Failed to load geographic data"}),e.jsx("p",{className:"text-sm text-slate-500",children:m})]})})]}):e.jsxs("div",{className:`bg-slate-800 rounded-xl border border-slate-700 p-6 ${n}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-teal-900/50 rounded-lg",children:e.jsx(l,{className:"w-5 h-5 text-teal-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Geographic Distribution"}),e.jsxs("p",{className:"text-sm text-slate-400",children:[f.toLocaleString()," visitors from ",i.length," countries"]})]})]}),e.jsx(G,{className:"w-4 h-4 text-slate-500"})]}),i.length>0?e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-slate-900 rounded-lg p-4 overflow-hidden",children:e.jsx(v,{projectionConfig:{scale:120,center:[0,20]},style:{width:"100%",height:"300px"},children:e.jsx(y,{geography:C,children:({geographies:t})=>t.map(s=>{const r=s.id,a=o.get(r);return e.jsx(w,{geography:s,fill:u(r),stroke:"#1e293b",strokeWidth:.5,style:{default:{outline:"none"},hover:{fill:"#06b6d4",outline:"none",cursor:"pointer"},pressed:{outline:"none"}},title:a?`${s.properties.NAME}: ${a.visitors.toLocaleString()} visitors (${a.percentage.toFixed(1)}%)`:s.properties.NAME},s.rsmKey)})})})})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] bg-slate-700/50 rounded-lg mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(l,{className:"w-8 h-8 text-slate-500 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-400",children:"No geographic data available"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Country data will appear here"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-3",children:"Top Countries"}),j.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-teal-600 rounded-lg flex items-center justify-center text-white text-sm font-bold",children:s+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-100",children:t.country}),e.jsxs("p",{className:"text-xs text-slate-400",children:[t.percentage.toFixed(1),"% of traffic"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-slate-100",children:t.visitors.toLocaleString()}),e.jsx("p",{className:"text-xs text-slate-400",children:"visitors"})]})]},t.country))]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-slate-500",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-slate-700 rounded"}),e.jsx("span",{children:"No data"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-teal-400 rounded"}),e.jsx("span",{children:"High traffic"})]})]}),e.jsx("p",{children:"Click countries for details"})]}),i.length===0&&!d&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(l,{className:"w-8 h-8 text-slate-500 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-400",children:"No geographic data found"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Country information will appear here"})]})]})}export{S as default};
